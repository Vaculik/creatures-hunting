<!-- Content Header (Page header) -->
<section class="content-header">
    <div>
        <h1>Change password
        </h1>
    </div>
    <ol class="breadcrumb">
        <li><a href="#/users/all"><i class="fa fa-dashboard"></i> Users</a></li>
        <li><a href="#/user/{{currentUser.id}}"><i class="fa fa-dashboard"></i> {{currentUser.loginName}}</a></li>
        <li class="active">Change password</li>
    </ol>
</section>


<!-- Main content -->
<section class="content">
    <div class="row">
        <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6">
            <div class="box box-primary">
                <div class="box-body">
                    <form name="form" novalidate role="form">
                        <div class="form-group has-feedback" ng-class="{'has-error': !form.password.$valid}">
                            <label for="password">Origin password:</label>
                            <input placeholder="Password" type="password" ng-minlength="5" maxlength="64" required
                                   class="form-control" ng-model="changePasswordDTO.originalPassword" name="password"
                                   id="password">
                            <span class="glyphicon glyphicon-lock form-control-feedback"></span>

                            <p class="help-block" ng-show="form.password.$error.required">Original password is
                                required</p>

                            <p class="help-block" ng-show="form.password.$error.minlength">Original password must be at
                                least 5 characters</p>
                        </div>
                        <div class="form-group has-feedback" ng-class="{'has-error': !form.newPassword.$valid}">
                            <label for="newPassword">New password:</label>
                            <input placeholder="New password" type="password" ng-minlength="5" maxlength="64" required
                                   class="form-control" ng-model="changePasswordDTO.newPassword" name="newPassword"
                                   id="newPassword">
                            <span class="glyphicon glyphicon-lock form-control-feedback"></span>

                            <p class="help-block" ng-show="form.newPassword.$error.required">New password is
                                required</p>

                            <p class="help-block" ng-show="form.newPassword.$error.minlength">New password must be at
                                least
                                5 characters</p>
                        </div>
                        <div class="form-group has-feedback"
                             ng-class="{'has-error': !form.retypePassword.$valid || !retypePasswordValid()}">
                            <label for="retypePassword">Retype new password:</label>
                            <input placeholder="Retype password" type="password" ng-minlength="5" maxlength="64"
                                   required class="form-control" ng-model="retypePassword" name="retypePassword"
                                   id="retypePassword">
                            <span class="glyphicon glyphicon-lock form-control-feedback"></span>

                            <p class="help-block" ng-show="!retypePasswordValid() && form.retypePassword.$valid">Retyped
                                password is not same</p>
                        </div>
                        <div>
                            <button ng-disabled="!form.$valid || !retypePasswordValid()"
                                    class="btn btn-flat btn-primary pull-right" type="submit"
                                    ng-click="changePassword(changePasswordDTO)">
                                Submit changes
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>